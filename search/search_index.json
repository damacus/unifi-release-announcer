{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"UniFi Release Announcer","text":"<p>A Discord bot that monitors UniFi community releases and posts announcements to a Discord channel.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Modular Scraper Architecture: Swappable backends for different scraping needs</li> <li>GraphQL API: Direct API access for reliable data fetching</li> <li>Docker Ready: Optimized Alpine-based container (157MB)</li> <li>Environment Configuration: Easy backend switching via environment variables</li> <li>\ud83d\udd0d Automatic Monitoring: Checks for new UniFi releases every 10 minutes</li> <li>\ud83d\udcf1 Platform Detection: Automatically tags releases with platform-specific emojis (iOS \ud83d\udcf1, Android \ud83e\udd16, Desktop \ud83d\udcbb)</li> <li>\ud83c\udfaf Smart Filtering: Only posts new releases, avoiding duplicates</li> <li>\u2638\ufe0f Kubernetes Support: Ready for deployment on k3s/Kubernetes clusters</li> </ul>"},{"location":"#how-it-works","title":"How It Works","text":"<ol> <li>Scraping: The bot scrapes the Ubiquiti Community forums for the latest UniFi releases</li> <li>Comparison: It compares the latest release URL with the previously posted one (stored in <code>/cache/release_state.json</code>)</li> <li>Posting: If a new release is found, it formats a message with platform tags and posts to Discord</li> <li>State Management: Updates the stored URL to prevent duplicate posts (stored in <code>/cache/release_state.json</code>)</li> </ol>"},{"location":"#message-format","title":"Message Format","text":"<p>The bot posts messages in this format:</p> <pre><code>\ud83c\udf89 **New UniFi Release Posted**\n\n\ud83d\udd17 [UniFi Protect iOS 2.13.1](https://community.ui.com/releases/...) \ud83d\udcf1\n</code></pre> <p>Platform tags:</p> <ul> <li>\ud83d\udcf1 for iOS releases</li> <li>\ud83e\udd16 for Android releases</li> <li>\ud83d\udcbb for Desktop/Application releases</li> <li>\ud83d\udd27 UniFi for other releases</li> </ul>"},{"location":"advanced/","title":"Advanced Usage","text":"<p>This guide covers advanced usage scenarios and customization options for the UniFi Release Announcer.</p>"},{"location":"advanced/#custom-check-intervals","title":"Custom Check Intervals","text":"<p>By default, the bot checks for new releases every 10 minutes. You can customize this interval by modifying the <code>@tasks.loop</code> decorator in <code>main.py</code>:</p> <pre><code># Default: Check every 10 minutes\n@tasks.loop(minutes=10)\nasync def check_for_updates() -&gt; None:\n    \"\"\"Periodically checks for new releases and posts them.\"\"\"\n    # ...\n\n# Custom: Check every 5 minutes\n@tasks.loop(minutes=5)\nasync def check_for_updates() -&gt; None:\n    \"\"\"Periodically checks for new releases and posts them.\"\"\"\n    # ...\n\n# Custom: Check every hour\n@tasks.loop(hours=1)\nasync def check_for_updates() -&gt; None:\n    \"\"\"Periodically checks for new releases and posts them.\"\"\"\n    # ...\n</code></pre> <p>Rate Limiting</p> <p>Be mindful of rate limits when setting shorter intervals. The Ubiquiti Community API may throttle requests if you check too frequently.</p>"},{"location":"advanced/#multiple-discord-channels","title":"Multiple Discord Channels","text":"<p>To post announcements to multiple Discord channels, you can modify the bot to support multiple channel IDs.</p>"},{"location":"advanced/#option-1-multiple-bot-instances","title":"Option 1: Multiple Bot Instances","text":"<p>Run separate instances of the bot with different configurations:</p> <pre><code># docker-compose.yml\nservices:\n  announcer-protect:\n    build: .\n    environment:\n      - DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}\n      - DISCORD_CHANNEL_ID=${PROTECT_CHANNEL_ID}\n      - TAGS=unifi-protect\n    volumes:\n      - ./cache/protect:/cache\n\n  announcer-network:\n    build: .\n    environment:\n      - DISCORD_BOT_TOKEN=${DISCORD_BOT_TOKEN}\n      - DISCORD_CHANNEL_ID=${NETWORK_CHANNEL_ID}\n      - TAGS=unifi-network\n    volumes:\n      - ./cache/network:/cache\n</code></pre>"},{"location":"advanced/#option-2-modify-code-for-multiple-channels","title":"Option 2: Modify Code for Multiple Channels","text":"<p>Modify <code>main.py</code> to support comma-separated channel IDs:</p> <pre><code># Get multiple channel IDs\nDISCORD_CHANNEL_IDS = os.getenv(\"DISCORD_CHANNEL_IDS\", \"\").split(\",\")\n\n# In process_new_release function\nfor channel_id_str in DISCORD_CHANNEL_IDS:\n    try:\n        channel_id = int(channel_id_str.strip())\n        channel = client.get_channel(channel_id)\n        if channel:\n            await channel.send(message)\n    except ValueError:\n        logging.error(f\"Invalid channel ID: {channel_id_str}\")\n</code></pre>"},{"location":"advanced/#custom-message-formatting","title":"Custom Message Formatting","text":"<p>You can customize the Discord message format by modifying the <code>format_release_message</code> function in <code>main.py</code>:</p>"},{"location":"advanced/#default-format","title":"Default Format","text":"<pre><code>def format_release_message(release: Release) -&gt; str:\n    \"\"\"Formats the release information into a Discord message.\"\"\"\n    title = release.title\n    url = release.url\n\n    platform_emoji = \"\ud83d\udd27\"  # Default emoji\n    if \"ios\" in title.lower():\n        platform_emoji = \"\ud83d\udcf1\"\n    elif \"android\" in title.lower():\n        platform_emoji = \"\ud83e\udd16\"\n    elif \"desktop\" in title.lower() or \"application\" in title.lower():\n        platform_emoji = \"\ud83d\udcbb\"\n\n    return f\"\ud83c\udf89 **New UniFi Release Posted**\\\\n\\\\n\ud83d\udd17 [{title}]({url}) {platform_emoji}\"\n</code></pre>"},{"location":"advanced/#custom-format-examples","title":"Custom Format Examples","text":""},{"location":"advanced/#minimal-format","title":"Minimal Format","text":"<pre><code>def format_release_message(release: Release) -&gt; str:\n    \"\"\"Minimal message format.\"\"\"\n    return f\"[{release.title}]({release.url})\"\n</code></pre>"},{"location":"advanced/#rich-embed-format","title":"Rich Embed Format","text":"<pre><code>async def post_release_embed(channel, release: Release):\n    \"\"\"Post release as a rich embed.\"\"\"\n    embed = discord.Embed(\n        title=release.title,\n        url=release.url,\n        description=\"A new UniFi release has been posted!\",\n        color=discord.Color.blue()\n    )\n    embed.set_footer(text=f\"Tag: {release.tag}\")\n    embed.timestamp = discord.utils.utcnow()\n\n    await channel.send(embed=embed)\n</code></pre>"},{"location":"advanced/#with-mentions","title":"With Mentions","text":"<pre><code>def format_release_message(release: Release) -&gt; str:\n    \"\"\"Format with role mention.\"\"\"\n    role_id = \"YOUR_ROLE_ID\"  # Replace with actual role ID\n    return f\"&lt;@&amp;{role_id}&gt; \ud83c\udf89 **New UniFi Release**\\\\n\\\\n\ud83d\udd17 [{release.title}]({release.url})\"\n</code></pre>"},{"location":"advanced/#forum-channel-support","title":"Forum Channel Support","text":"<p>The bot supports posting to Discord Forum channels. When posting to a forum channel, it creates a new thread for each release:</p> <pre><code>if isinstance(channel, discord.ForumChannel):\n    thread = await channel.create_thread(\n        name=f\"UniFi Release: {latest_release.title}\",\n        content=message\n    )\n    logging.info(\"Posted to forum thread: %s\", thread.thread.name)\n</code></pre> <p>To use forum channels:</p> <ol> <li>Create a forum channel in your Discord server</li> <li>Get the forum channel ID</li> <li>Set <code>DISCORD_CHANNEL_ID</code> to the forum channel ID</li> </ol>"},{"location":"advanced/#custom-tag-filtering-logic","title":"Custom Tag Filtering Logic","text":"<p>The bot filters releases based on tags. You can customize the filtering logic in <code>scraper_backends/graphql_backend.py</code>:</p>"},{"location":"advanced/#current-implementation","title":"Current Implementation","text":"<pre><code># Get tags from environment or use default\ntags_env = os.getenv(\"TAGS\", \"unifi-protect\")\nself.tags = [tag.strip() for tag in tags_env.split(\",\")]\n</code></pre>"},{"location":"advanced/#custom-filter-examples","title":"Custom Filter Examples","text":""},{"location":"advanced/#filter-by-version-pattern","title":"Filter by Version Pattern","text":"<pre><code>def should_announce_release(release: Release) -&gt; bool:\n    \"\"\"Only announce stable releases (not beta/RC).\"\"\"\n    title_lower = release.title.lower()\n    if \"beta\" in title_lower or \"rc\" in title_lower:\n        return False\n    return True\n</code></pre>"},{"location":"advanced/#filter-by-date","title":"Filter by Date","text":"<pre><code>from datetime import datetime, timedelta\n\ndef should_announce_release(release: Release, max_age_days: int = 7) -&gt; bool:\n    \"\"\"Only announce releases from the last N days.\"\"\"\n    # Assuming release has a published_date field\n    if hasattr(release, 'published_date'):\n        age = datetime.now() - release.published_date\n        return age.days &lt;= max_age_days\n    return True\n</code></pre>"},{"location":"advanced/#state-management","title":"State Management","text":"<p>The bot uses a JSON file to track announced releases. The state is stored in <code>/cache/release_state.json</code>:</p> <pre><code>{\n  \"unifi-protect\": \"https://community.ui.com/releases/...\",\n  \"unifi-network\": \"https://community.ui.com/releases/...\"\n}\n</code></pre>"},{"location":"advanced/#resetting-state","title":"Resetting State","text":"<p>To force the bot to re-announce the latest release:</p> <pre><code># Docker\ndocker compose exec announcer rm /cache/release_state.json\n\n# Kubernetes\nkubectl exec &lt;pod-name&gt; -- rm /cache/release_state.json\n\n# Local\nrm cache/release_state.json\n</code></pre>"},{"location":"advanced/#custom-state-storage","title":"Custom State Storage","text":"<p>You can modify <code>state_manager.py</code> to use a different storage backend:</p>"},{"location":"advanced/#redis-example","title":"Redis Example","text":"<pre><code>import redis\nimport json\n\nclass RedisStateManager:\n    \"\"\"State manager using Redis.\"\"\"\n\n    def __init__(self, redis_url: str):\n        self.redis = redis.from_url(redis_url)\n\n    def has_seen_url(self, tag: str, url: str) -&gt; bool:\n        \"\"\"Check if URL has been seen for this tag.\"\"\"\n        stored_url = self.redis.get(f\"release:{tag}\")\n        return stored_url and stored_url.decode() == url\n\n    def set_last_url(self, tag: str, url: str) -&gt; None:\n        \"\"\"Store the last URL for this tag.\"\"\"\n        self.redis.set(f\"release:{tag}\", url)\n</code></pre>"},{"location":"advanced/#webhook-integration","title":"Webhook Integration","text":"<p>Instead of using a Discord bot, you can use webhooks for simpler deployment:</p> <pre><code>import requests\n\ndef post_to_webhook(webhook_url: str, release: Release):\n    \"\"\"Post release to Discord webhook.\"\"\"\n    data = {\n        \"content\": format_release_message(release),\n        \"username\": \"UniFi Release Announcer\"\n    }\n\n    response = requests.post(webhook_url, json=data)\n    response.raise_for_status()\n</code></pre> <p>Update your <code>.env</code>: <pre><code>DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...\n</code></pre></p>"},{"location":"advanced/#monitoring-and-alerts","title":"Monitoring and Alerts","text":""},{"location":"advanced/#health-checks","title":"Health Checks","text":"<p>Add a health check endpoint for monitoring:</p> <pre><code>from aiohttp import web\n\nasync def health_check(request):\n    \"\"\"Health check endpoint.\"\"\"\n    return web.Response(text=\"OK\")\n\n# Add to your bot\nasync def start_health_server():\n    \"\"\"Start health check server.\"\"\"\n    app = web.Application()\n    app.router.add_get('/health', health_check)\n    runner = web.AppRunner(app)\n    await runner.setup()\n    site = web.TCPSite(runner, '0.0.0.0', 8080)\n    await site.start()\n</code></pre>"},{"location":"advanced/#prometheus-metrics","title":"Prometheus Metrics","text":"<p>Add Prometheus metrics for monitoring:</p> <pre><code>from prometheus_client import Counter, Gauge, start_http_server\n\n# Metrics\nreleases_announced = Counter('releases_announced_total', 'Total releases announced')\nlast_check_time = Gauge('last_check_timestamp', 'Timestamp of last check')\ncheck_errors = Counter('check_errors_total', 'Total check errors')\n\n# In your code\nreleases_announced.inc()\nlast_check_time.set_to_current_time()\n\n# Start metrics server\nstart_http_server(9090)\n</code></pre>"},{"location":"advanced/#testing-locally","title":"Testing Locally","text":""},{"location":"advanced/#test-with-mock-data","title":"Test with Mock Data","text":"<p>Create a test script to verify message formatting without posting to Discord:</p> <pre><code># test_message.py\nfrom scraper_interface import Release\nfrom main import format_release_message\n\n# Create test release\ntest_release = Release(\n    title=\"UniFi Protect iOS 2.13.1\",\n    url=\"https://community.ui.com/releases/test\",\n    tag=\"unifi-protect\"\n)\n\n# Print formatted message\nprint(format_release_message(test_release))\n</code></pre> <p>Run with: <pre><code>uv run python test_message.py\n</code></pre></p>"},{"location":"advanced/#test-scraper-backends","title":"Test Scraper Backends","text":"<p>Test each backend independently:</p> <pre><code># Test GraphQL backend\nuv run python -c \"\nimport asyncio\nfrom scraper_backends.graphql_backend import GraphQLBackend\n\nasync def test():\n    backend = GraphQLBackend()\n    releases = await backend.get_latest_releases()\n    for release in releases:\n        print(f'{release[\\\"tag\\\"]}: {release[\\\"title\\\"]}')\n\nasyncio.run(test())\n\"\n</code></pre>"},{"location":"advanced/#performance-optimization","title":"Performance Optimization","text":""},{"location":"advanced/#caching-responses","title":"Caching Responses","text":"<p>Add caching to reduce API calls:</p> <pre><code>from functools import lru_cache\nfrom datetime import datetime, timedelta\n\nclass CachedBackend:\n    \"\"\"Backend with response caching.\"\"\"\n\n    def __init__(self):\n        self.cache = {}\n        self.cache_duration = timedelta(minutes=5)\n\n    async def get_latest_releases(self):\n        \"\"\"Get releases with caching.\"\"\"\n        now = datetime.now()\n\n        if 'releases' in self.cache:\n            cached_time, cached_data = self.cache['releases']\n            if now - cached_time &lt; self.cache_duration:\n                return cached_data\n\n        # Fetch fresh data\n        releases = await self._fetch_releases()\n        self.cache['releases'] = (now, releases)\n        return releases\n</code></pre>"},{"location":"advanced/#async-optimization","title":"Async Optimization","text":"<p>Process multiple tags concurrently:</p> <pre><code>import asyncio\n\nasync def get_all_releases(tags: list[str]) -&gt; list[Release]:\n    \"\"\"Fetch releases for all tags concurrently.\"\"\"\n    tasks = [get_release_for_tag(tag) for tag in tags]\n    results = await asyncio.gather(*tasks, return_exceptions=True)\n\n    releases = []\n    for result in results:\n        if isinstance(result, Release):\n            releases.append(result)\n        elif isinstance(result, Exception):\n            logging.error(f\"Error fetching release: {result}\")\n\n    return releases\n</code></pre>"},{"location":"advanced/#security-best-practices","title":"Security Best Practices","text":""},{"location":"advanced/#environment-variable-validation","title":"Environment Variable Validation","text":"<p>Add validation for sensitive configuration:</p> <pre><code>import re\n\ndef validate_discord_token(token: str) -&gt; bool:\n    \"\"\"Validate Discord token format.\"\"\"\n    # Discord tokens are typically base64 encoded\n    pattern = r'^[A-Za-z0-9_-]{24}\\.[A-Za-z0-9_-]{6}\\.[A-Za-z0-9_-]{27}$'\n    return bool(re.match(pattern, token))\n\ndef validate_channel_id(channel_id: str) -&gt; bool:\n    \"\"\"Validate Discord channel ID.\"\"\"\n    return channel_id.isdigit() and len(channel_id) &gt;= 17\n</code></pre>"},{"location":"advanced/#secrets-management","title":"Secrets Management","text":"<p>Use Docker secrets or Kubernetes secrets instead of environment variables:</p> <pre><code># docker-compose.yml with secrets\nservices:\n  announcer:\n    build: .\n    secrets:\n      - discord_token\n      - discord_channel_id\n\nsecrets:\n  discord_token:\n    file: ./secrets/discord_token.txt\n  discord_channel_id:\n    file: ./secrets/discord_channel_id.txt\n</code></pre> <pre><code># Read from secrets\ndef read_secret(secret_name: str) -&gt; str:\n    \"\"\"Read secret from Docker/Kubernetes secrets.\"\"\"\n    secret_path = f\"/run/secrets/{secret_name}\"\n    if os.path.exists(secret_path):\n        with open(secret_path) as f:\n            return f.read().strip()\n    return os.getenv(secret_name.upper(), \"\")\n</code></pre>"},{"location":"api/","title":"API Reference","text":"<p>This page provides detailed API documentation for the UniFi Release Announcer codebase.</p>"},{"location":"api/#core-modules","title":"Core Modules","text":""},{"location":"api/#mainpy","title":"main.py","text":"<p>The main Discord bot application that orchestrates the release checking and announcement process.</p>"},{"location":"api/#functions","title":"Functions","text":""},{"location":"api/#format_release_messagerelease-release-str","title":"<code>format_release_message(release: Release) -&gt; str</code>","text":"<p>Formats a release object into a Discord message string.</p> <p>Parameters: - <code>release</code> (Release): The release object to format</p> <p>Returns: - <code>str</code>: Formatted message string with emojis and markdown</p> <p>Example: <pre><code>release = Release(\n    title=\"UniFi Protect iOS 2.13.1\",\n    url=\"https://community.ui.com/releases/...\",\n    tag=\"unifi-protect\"\n)\nmessage = format_release_message(release)\n# Returns: \"\ud83c\udf89 **New UniFi Release Posted**\\n\\n\ud83d\udd17 [UniFi Protect iOS 2.13.1](...) \ud83d\udcf1\"\n</code></pre></p>"},{"location":"api/#async-process_new_releaselatest_release-release-state_manager-statemanager-none","title":"<code>async process_new_release(latest_release: Release, state_manager: StateManager) -&gt; None</code>","text":"<p>Processes a new release by sending a Discord notification and updating state.</p> <p>Parameters: - <code>latest_release</code> (Release): The release to announce - <code>state_manager</code> (StateManager): State manager instance for tracking announced releases</p> <p>Raises: - <code>discord.Forbidden</code>: If bot lacks permissions - <code>discord.HTTPException</code>: If Discord API request fails</p> <p>Example: <pre><code>state_manager = StateManager(\"/cache/release_state.json\")\nawait process_new_release(release, state_manager)\n</code></pre></p>"},{"location":"api/#async-check_for_updates-none","title":"<code>async check_for_updates() -&gt; None</code>","text":"<p>Background task that periodically checks for new releases. Runs every 10 minutes by default.</p> <p>Decorator: - <code>@tasks.loop(minutes=10)</code>: Configures the check interval</p> <p>Example: <pre><code># Customize interval\n@tasks.loop(minutes=5)  # Check every 5 minutes\nasync def check_for_updates() -&gt; None:\n    # ...\n</code></pre></p>"},{"location":"api/#events","title":"Events","text":""},{"location":"api/#async-on_ready-none","title":"<code>async on_ready() -&gt; None</code>","text":"<p>Discord event handler called when the bot successfully logs in.</p> <p>Behavior: - Logs bot username and ID - Starts the <code>check_for_updates</code> background task</p>"},{"location":"api/#scraper_interfacepy","title":"scraper_interface.py","text":"<p>Provides the interface for scraping UniFi releases.</p>"},{"location":"api/#classes","title":"Classes","text":""},{"location":"api/#release","title":"<code>Release</code>","text":"<p>Dataclass representing a UniFi release.</p> <p>Attributes: - <code>title</code> (str): Release title (e.g., \"UniFi Protect iOS 2.13.1\") - <code>url</code> (str): URL to the release announcement - <code>tag</code> (str): Product tag (e.g., \"unifi-protect\")</p> <p>Example: <pre><code>from scraper_interface import Release\n\nrelease = Release(\n    title=\"UniFi Protect iOS 2.13.1\",\n    url=\"https://community.ui.com/releases/UniFi-Protect-iOS-2-13-1/...\",\n    tag=\"unifi-protect\"\n)\n</code></pre></p>"},{"location":"api/#functions_1","title":"Functions","text":""},{"location":"api/#async-get_latest_release-release-none","title":"<code>async get_latest_release() -&gt; Release | None</code>","text":"<p>Fetches the latest release using the GraphQL backend.</p> <p>Returns: - <code>Release | None</code>: Release object if found, None if error occurs</p> <p>Example: <pre><code>release = await get_latest_release()\nif release:\n    print(f\"Latest: {release.title}\")\n</code></pre></p>"},{"location":"api/#async-get_latest_releases-listrelease","title":"<code>async get_latest_releases() -&gt; list[Release]</code>","text":"<p>Fetches the latest releases for all configured tags.</p> <p>Returns: - <code>list[Release]</code>: List of Release objects, one per configured tag</p> <p>Example: <pre><code>releases = await get_latest_releases()\nfor release in releases:\n    print(f\"{release.tag}: {release.title}\")\n</code></pre></p>"},{"location":"api/#state_managerpy","title":"state_manager.py","text":"<p>Manages persistent state for tracking announced releases.</p>"},{"location":"api/#classes_1","title":"Classes","text":""},{"location":"api/#statemanager","title":"<code>StateManager</code>","text":"<p>Handles reading and writing release state to a JSON file.</p> <p>Constructor: <pre><code>StateManager(state_file: str)\n</code></pre></p> <p>Parameters: - <code>state_file</code> (str): Path to the JSON state file</p> <p>Methods:</p>"},{"location":"api/#has_seen_urltag-str-url-str-bool","title":"<code>has_seen_url(tag: str, url: str) -&gt; bool</code>","text":"<p>Checks if a URL has been previously announced for a given tag.</p> <p>Parameters: - <code>tag</code> (str): Product tag (e.g., \"unifi-protect\") - <code>url</code> (str): Release URL to check</p> <p>Returns: - <code>bool</code>: True if URL has been seen, False otherwise</p> <p>Example: <pre><code>state_manager = StateManager(\"/cache/release_state.json\")\nif not state_manager.has_seen_url(\"unifi-protect\", release_url):\n    # This is a new release\n    await announce_release(release)\n</code></pre></p>"},{"location":"api/#set_last_urltag-str-url-str-none","title":"<code>set_last_url(tag: str, url: str) -&gt; None</code>","text":"<p>Stores the last announced URL for a given tag.</p> <p>Parameters: - <code>tag</code> (str): Product tag - <code>url</code> (str): Release URL to store</p> <p>Example: <pre><code>state_manager.set_last_url(\"unifi-protect\", release.url)\n</code></pre></p>"},{"location":"api/#_load_state-dictstr-str","title":"<code>_load_state() -&gt; dict[str, str]</code>","text":"<p>Private method that loads state from the JSON file.</p> <p>Returns: - <code>dict[str, str]</code>: Dictionary mapping tags to URLs</p>"},{"location":"api/#_save_statestate-dictstr-str-none","title":"<code>_save_state(state: dict[str, str]) -&gt; None</code>","text":"<p>Private method that saves state to the JSON file.</p> <p>Parameters: - <code>state</code> (dict[str, str]): State dictionary to save</p>"},{"location":"api/#scraper_backendsgraphql_backendpy","title":"scraper_backends/graphql_backend.py","text":"<p>GraphQL-based backend for fetching UniFi releases.</p>"},{"location":"api/#classes_2","title":"Classes","text":""},{"location":"api/#graphqlbackend","title":"<code>GraphQLBackend</code>","text":"<p>Scraper implementation using the Ubiquiti Community GraphQL API.</p> <p>Constructor: <pre><code>GraphQLBackend()\n</code></pre></p> <p>Attributes: - <code>tags</code> (list[str]): List of product tags to monitor (from TAGS env var) - <code>api_url</code> (str): GraphQL API endpoint</p> <p>Methods:</p>"},{"location":"api/#async-get_latest_release-release-none_1","title":"<code>async get_latest_release() -&gt; Release | None</code>","text":"<p>Fetches the latest release for the first configured tag.</p> <p>Returns: - <code>Release | None</code>: Latest release or None if not found</p> <p>Example: <pre><code>backend = GraphQLBackend()\nrelease = await backend.get_latest_release()\n</code></pre></p>"},{"location":"api/#async-get_latest_releases-listdict","title":"<code>async get_latest_releases() -&gt; list[dict]</code>","text":"<p>Fetches the latest releases for all configured tags.</p> <p>Returns: - <code>list[dict]</code>: List of release dictionaries with keys: title, url, tag</p> <p>Example: <pre><code>backend = GraphQLBackend()\nreleases = await backend.get_latest_releases()\nfor release in releases:\n    print(f\"{release['tag']}: {release['title']}\")\n</code></pre></p>"},{"location":"api/#async-_fetch_releases_for_tagtag-str-dict-none","title":"<code>async _fetch_releases_for_tag(tag: str) -&gt; dict | None</code>","text":"<p>Private method that fetches releases for a specific tag.</p> <p>Parameters: - <code>tag</code> (str): Product tag to fetch</p> <p>Returns: - <code>dict | None</code>: Release dictionary or None if not found</p>"},{"location":"api/#scraper_backendsrss_backendpy","title":"scraper_backends/rss_backend.py","text":"<p>RSS-based backend for fetching UniFi releases (legacy).</p>"},{"location":"api/#classes_3","title":"Classes","text":""},{"location":"api/#rssbackend","title":"<code>RSSBackend</code>","text":"<p>Scraper implementation using the Ubiquiti Community RSS feed.</p> <p>Constructor: <pre><code>RSSBackend()\n</code></pre></p> <p>Methods:</p>"},{"location":"api/#async-get_latest_release-release-none_2","title":"<code>async get_latest_release() -&gt; Release | None</code>","text":"<p>Fetches the latest release from the RSS feed.</p> <p>Returns: - <code>Release | None</code>: Latest release or None if error occurs</p> <p>Note: The RSS backend does not support tag filtering and returns the absolute latest release regardless of product.</p>"},{"location":"api/#release_parserpy","title":"release_parser.py","text":"<p>Utilities for parsing release data.</p>"},{"location":"api/#functions_2","title":"Functions","text":""},{"location":"api/#parse_release_titletitle-str-dictstr-str","title":"<code>parse_release_title(title: str) -&gt; dict[str, str]</code>","text":"<p>Parses a release title into components.</p> <p>Parameters: - <code>title</code> (str): Release title to parse</p> <p>Returns: - <code>dict[str, str]</code>: Dictionary with keys: product, version, platform</p> <p>Example: <pre><code>from release_parser import parse_release_title\n\nresult = parse_release_title(\"UniFi Protect iOS 2.13.1\")\n# Returns: {\n#     \"product\": \"UniFi Protect\",\n#     \"platform\": \"iOS\",\n#     \"version\": \"2.13.1\"\n# }\n</code></pre></p>"},{"location":"api/#environment-variables","title":"Environment Variables","text":""},{"location":"api/#required-variables","title":"Required Variables","text":"Variable Type Description <code>DISCORD_BOT_TOKEN</code> string Discord bot authentication token <code>DISCORD_CHANNEL_ID</code> string Discord channel ID (numeric)"},{"location":"api/#optional-variables","title":"Optional Variables","text":"Variable Type Default Description <code>SCRAPER_BACKEND</code> string <code>\"graphql\"</code> Backend to use: <code>graphql</code> or <code>rss</code> <code>TAGS</code> string <code>\"unifi-protect\"</code> Comma-separated list of product tags"},{"location":"api/#data-structures","title":"Data Structures","text":""},{"location":"api/#state-file-format","title":"State File Format","text":"<p>The state file (<code>/cache/release_state.json</code>) uses the following format:</p> <pre><code>{\n  \"unifi-protect\": \"https://community.ui.com/releases/UniFi-Protect-iOS-2-13-1/...\",\n  \"unifi-network\": \"https://community.ui.com/releases/UniFi-Network-8-0-7/...\",\n  \"unifi-access\": \"https://community.ui.com/releases/UniFi-Access-1-2-3/...\"\n}\n</code></pre> <p>Structure: - Keys: Product tags (string) - Values: Last announced release URL (string)</p>"},{"location":"api/#error-handling","title":"Error Handling","text":""},{"location":"api/#common-exceptions","title":"Common Exceptions","text":""},{"location":"api/#discordforbidden","title":"<code>discord.Forbidden</code>","text":"<p>Raised when the bot lacks permissions to perform an action.</p> <p>Handling: <pre><code>try:\n    await channel.send(message)\nexcept discord.Forbidden:\n    logging.error(\"Bot lacks permissions in channel\")\n</code></pre></p>"},{"location":"api/#discordhttpexception","title":"<code>discord.HTTPException</code>","text":"<p>Raised when a Discord API request fails.</p> <p>Handling: <pre><code>try:\n    await channel.send(message)\nexcept discord.HTTPException as e:\n    logging.error(f\"Discord API error: {e}\")\n</code></pre></p>"},{"location":"api/#valueerror","title":"<code>ValueError</code>","text":"<p>Raised when environment variables have invalid values.</p> <p>Handling: <pre><code>try:\n    channel_id = int(DISCORD_CHANNEL_ID)\nexcept ValueError:\n    logging.error(\"Invalid DISCORD_CHANNEL_ID\")\n    sys.exit(1)\n</code></pre></p>"},{"location":"api/#testing","title":"Testing","text":""},{"location":"api/#test-utilities","title":"Test Utilities","text":""},{"location":"api/#mock-release-creation","title":"Mock Release Creation","text":"<pre><code>from scraper_interface import Release\n\ndef create_test_release(\n    title: str = \"Test Release\",\n    url: str = \"https://example.com\",\n    tag: str = \"unifi-protect\"\n) -&gt; Release:\n    \"\"\"Create a test release object.\"\"\"\n    return Release(title=title, url=url, tag=tag)\n</code></pre>"},{"location":"api/#mock-state-manager","title":"Mock State Manager","text":"<pre><code>from unittest.mock import Mock\n\ndef create_mock_state_manager():\n    \"\"\"Create a mock state manager for testing.\"\"\"\n    mock = Mock(spec=StateManager)\n    mock.has_seen_url.return_value = False\n    mock.set_last_url.return_value = None\n    return mock\n</code></pre>"},{"location":"api/#type-hints","title":"Type Hints","text":"<p>The codebase uses Python type hints for better IDE support and type checking.</p>"},{"location":"api/#common-types","title":"Common Types","text":"<pre><code>from typing import Optional, List, Dict\n\n# Release object\nRelease: dataclass\n\n# State dictionary\nStateDict = Dict[str, str]\n\n# Release list\nReleaseList = List[Release]\n\n# Optional release\nOptionalRelease = Optional[Release]\n</code></pre>"},{"location":"api/#logging","title":"Logging","text":""},{"location":"api/#log-levels","title":"Log Levels","text":"<p>The application uses Python's standard logging module with the following levels:</p> <ul> <li><code>DEBUG</code>: Detailed diagnostic information</li> <li><code>INFO</code>: General informational messages</li> <li><code>WARNING</code>: Warning messages for non-critical issues</li> <li><code>ERROR</code>: Error messages for failures</li> <li><code>CRITICAL</code>: Critical errors that prevent startup</li> </ul>"},{"location":"api/#log-format","title":"Log Format","text":"<pre><code>%(asctime)s - %(levelname)s - %(message)s\n</code></pre> <p>Example output: <pre><code>2025-11-24 10:00:00 - INFO - Checking for new UniFi releases...\n2025-11-24 10:00:01 - INFO - New release found: UniFi Protect iOS 2.13.1 (tag: unifi-protect)\n2025-11-24 10:00:02 - INFO - Posted to text channel: releases\n</code></pre></p>"},{"location":"api/#configuring-log-level","title":"Configuring Log Level","text":"<pre><code>import logging\n\n# Set to DEBUG for verbose output\nlogging.basicConfig(level=logging.DEBUG)\n\n# Set to WARNING to reduce noise\nlogging.basicConfig(level=logging.WARNING)\n</code></pre>"},{"location":"configuration/","title":"Configuration","text":""},{"location":"configuration/#environment-variables","title":"Environment Variables","text":"Variable Description Required <code>DISCORD_BOT_TOKEN</code> Your Discord bot token Yes <code>DISCORD_CHANNEL_ID</code> Discord channel ID for announcements Yes <code>SCRAPER_BACKEND</code> Backend to use for scraping: <code>graphql</code> (default) or <code>rss</code> No <code>TAGS</code> Comma-separated list of UniFi product tags to monitor (e.g., \"unifi-protect,unifi-network\"). Defaults to \"unifi-protect\" if not set. See Available Tags below. No"},{"location":"configuration/#automatic-filtering","title":"Automatic Filtering","text":"<p>The release announcer automatically filters out certain types of releases to focus on main application updates:</p> <p>Filtered Release Types: - Mobile applications (Android, iOS, iPhone, iPad) - Hardware-specific tools (SFP Wizard) - Peripheral devices (UPS firmware)</p> <p>This ensures you only receive notifications for core application releases (e.g., UniFi Network Application, UniFi Protect Application) and not for mobile app updates or hardware accessories.</p>"},{"location":"configuration/#discord-bot-setup","title":"Discord Bot Setup","text":"<ol> <li>Go to the Discord Developer Portal</li> <li>Create a new application</li> <li>Go to the \"Bot\" section and create a bot</li> <li>Copy the bot token</li> <li>Invite the bot to your server with \"Send Messages\" permission</li> <li>Get your channel ID by right-clicking on the channel and selecting \"Copy ID\"</li> </ol>"},{"location":"configuration/#available-tags","title":"Available Tags","text":"<p>The following tags are available for filtering UniFi releases:</p>"},{"location":"configuration/#unifi-products","title":"UniFi Products","text":"<ul> <li><code>unifi</code> - General UniFi releases</li> <li><code>unifi-access</code> - UniFi Access (door access control)</li> <li><code>unifi-cloud-gateway</code> - UniFi Cloud Gateway</li> <li><code>unifi-connect</code> - UniFi Connect</li> <li><code>unifi-design-center</code> - UniFi Design Center</li> <li><code>unifi-drive</code> - UniFi Drive (storage)</li> <li><code>unifi-gateway-cloudkey</code> - UniFi Gateway and Cloud Key</li> <li><code>unifi-led</code> - UniFi LED</li> <li><code>unifi-mobility</code> - UniFi Mobility</li> <li><code>unifi-network</code> - UniFi Network (switches, routers)</li> <li><code>unifi-play</code> - UniFi Play</li> <li><code>unifi-portal</code> - UniFi Portal</li> <li><code>unifi-protect</code> - UniFi Protect (security cameras) - Default</li> <li><code>unifi-routing-switching</code> - UniFi Routing and Switching</li> <li><code>unifi-switching</code> - UniFi Switching</li> <li><code>unifi-talk</code> - UniFi Talk (VoIP)</li> <li><code>unifi-video</code> - UniFi Video (legacy)</li> <li><code>unifi-voip</code> - UniFi VoIP</li> <li><code>unifi-wireless</code> - UniFi Wireless (access points)</li> </ul>"},{"location":"configuration/#other-ubiquiti-products","title":"Other Ubiquiti Products","text":"<ul> <li><code>60GHz</code> - 60GHz wireless products</li> <li><code>aircontrol</code> - AirControl software</li> <li><code>airfiber</code> - AirFiber products</li> <li><code>airfiber-ltu</code> - AirFiber LTU</li> <li><code>airmax</code> - AirMax products</li> <li><code>airmax-aircube</code> - AirMax AirCube</li> <li><code>amplifi</code> - AmpliFi consumer routers</li> <li><code>edgemax</code> - EdgeMax routers</li> <li><code>edgeswitch</code> - EdgeSwitch products</li> <li><code>gigabeam</code> - GigaBeam products</li> <li><code>innerspace</code> - InnerSpace location services</li> <li><code>isp</code> - ISP solutions</li> <li><code>isp-design-center</code> - ISP Design Center</li> <li><code>ufiber</code> - UFiber products</li> <li><code>uid</code> - UID products</li> <li><code>uisp-app</code> - UISP application</li> <li><code>uisp-power</code> - UISP Power management</li> <li><code>unms</code> - UNMS (legacy)</li> <li><code>wave</code> - Wave products</li> <li><code>wifiman</code> - WiFiman application</li> </ul>"},{"location":"configuration/#general-categories","title":"General Categories","text":"<ul> <li><code>community-feedback</code> - Community feedback</li> <li><code>general</code> - General announcements</li> <li><code>routing</code> - Routing products</li> <li><code>security</code> - Security products</li> <li><code>site-manager</code> - Site management</li> <li><code>solar</code> - Solar products</li> <li><code>switching</code> - Switching products</li> </ul>"},{"location":"configuration/#examples","title":"Examples","text":"<pre><code># Monitor only UniFi Protect releases (default)\nTAGS=\"unifi-protect\"\n\n# Monitor UniFi Protect and Network releases\nTAGS=\"unifi-protect,unifi-network\"\n\n# Monitor all UniFi products\nTAGS=\"unifi,unifi-protect,unifi-network,unifi-access,unifi-talk\"\n\n# Monitor EdgeMax and AmpliFi products\nTAGS=\"edgemax,amplifi\"\n</code></pre>"},{"location":"contributing/","title":"Contributing","text":"<p>Thank you for your interest in contributing to the UniFi Release Announcer! This guide will help you get started.</p>"},{"location":"contributing/#development-setup","title":"Development Setup","text":""},{"location":"contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.13</li> <li>uv package manager</li> <li>Task task runner</li> <li>Docker and Docker Compose (for container testing)</li> </ul>"},{"location":"contributing/#getting-started","title":"Getting Started","text":"<ol> <li>Fork and clone the repository:</li> </ol> <pre><code>git clone https://github.com/YOUR_USERNAME/unifi-release-announcer.git\ncd unifi-release-announcer\n</code></pre> <ol> <li>Install development dependencies:</li> </ol> <pre><code>task dev-install\n</code></pre> <ol> <li>Set up environment variables:</li> </ol> <p>Create a <code>.env</code> file:    <pre><code>DISCORD_BOT_TOKEN=your_test_bot_token\nDISCORD_CHANNEL_ID=your_test_channel_id\nSCRAPER_BACKEND=graphql\nTAGS=unifi-protect\n</code></pre></p> <ol> <li>Run tests to verify setup:</li> </ol> <pre><code>task test\n</code></pre>"},{"location":"contributing/#development-workflow","title":"Development Workflow","text":""},{"location":"contributing/#using-taskfile","title":"Using Taskfile","text":"<p>This project uses Taskfile for common development tasks:</p> <pre><code># Show all available tasks\ntask\n\n# Install dependencies\ntask dev-install\n\n# Run tests\ntask test\n\n# Run tests with coverage\ntask test-cov\n\n# Run linting\ntask lint\n\n# Auto-fix linting issues\ntask lint-fix\n\n# Format code\ntask format\n\n# Type checking\ntask type-check\n\n# Run all checks\ntask check\n\n# Run the application\ntask run\n\n# Build Docker image\ntask build\n\n# Run in Docker\ntask docker-run\n\n# Clean cache files\ntask clean\n\n# Pre-commit checks (format, lint, test)\ntask pre-commit\n\n# CI pipeline (test-cov, lint, type-check)\ntask ci\n</code></pre>"},{"location":"contributing/#code-quality","title":"Code Quality","text":"<p>We maintain high code quality standards:</p> <ul> <li>Linting: Using Ruff</li> <li>Type Checking: Using MyPy</li> <li>Testing: Using Pytest</li> <li>Code Coverage: Aiming for high test coverage</li> </ul> <p>Before submitting a PR, run:</p> <pre><code>task pre-commit\n</code></pre> <p>This will: 1. Format your code 2. Fix linting issues 3. Run all tests</p>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>.\n\u251c\u2500\u2500 main.py                     # Main Discord bot application\n\u251c\u2500\u2500 scraper_interface.py        # Scraper backend interface and factory\n\u251c\u2500\u2500 scraper_backends/           # Scraper backend implementations\n\u2502   \u251c\u2500\u2500 graphql_backend.py     # GraphQL API backend\n\u2502   \u2514\u2500\u2500 rss_backend.py         # RSS feed backend\n\u251c\u2500\u2500 release_parser.py           # Release data parsing utilities\n\u251c\u2500\u2500 state_manager.py            # State persistence management\n\u251c\u2500\u2500 tests/                      # Test files\n\u2502   \u251c\u2500\u2500 test_graphql_backend.py\n\u2502   \u251c\u2500\u2500 test_rss_backend.py\n\u2502   \u251c\u2500\u2500 test_scraper_interface.py\n\u2502   \u2514\u2500\u2500 test_integration.py\n\u251c\u2500\u2500 docs/                       # MkDocs documentation\n\u251c\u2500\u2500 k8s/                        # Kubernetes manifests\n\u251c\u2500\u2500 pyproject.toml              # Project dependencies and config\n\u251c\u2500\u2500 Taskfile.yml                # Task definitions\n\u251c\u2500\u2500 docker-compose.yml          # Docker Compose configuration\n\u2514\u2500\u2500 Dockerfile                  # Container image definition\n</code></pre>"},{"location":"contributing/#making-changes","title":"Making Changes","text":""},{"location":"contributing/#1-create-a-branch","title":"1. Create a Branch","text":"<pre><code>git checkout -b feature/your-feature-name\n</code></pre> <p>Use descriptive branch names: - <code>feature/</code> for new features - <code>fix/</code> for bug fixes - <code>docs/</code> for documentation changes - <code>refactor/</code> for code refactoring</p>"},{"location":"contributing/#2-make-your-changes","title":"2. Make Your Changes","text":"<ul> <li>Write clear, concise code</li> <li>Follow existing code style</li> <li>Add type hints to all functions</li> <li>Write docstrings for public functions and classes</li> </ul>"},{"location":"contributing/#3-add-tests","title":"3. Add Tests","text":"<p>All new features and bug fixes should include tests:</p> <pre><code># tests/test_your_feature.py\nimport pytest\nfrom your_module import your_function\n\ndef test_your_function():\n    \"\"\"Test that your_function works correctly.\"\"\"\n    result = your_function(\"input\")\n    assert result == \"expected_output\"\n</code></pre> <p>Run tests: <pre><code>task test\n</code></pre></p>"},{"location":"contributing/#4-update-documentation","title":"4. Update Documentation","text":"<p>If your change affects usage: - Update relevant documentation in <code>docs/</code> - Update the README.md if needed - Add examples if appropriate</p>"},{"location":"contributing/#5-run-quality-checks","title":"5. Run Quality Checks","text":"<p>Before committing:</p> <pre><code># Run all pre-commit checks\ntask pre-commit\n\n# Or run individually\ntask format      # Format code\ntask lint-fix    # Fix linting issues\ntask type-check  # Check types\ntask test        # Run tests\n</code></pre>"},{"location":"contributing/#6-commit-your-changes","title":"6. Commit Your Changes","text":"<p>Write clear commit messages:</p> <pre><code>git add .\ngit commit -m \"feat: add support for new tag filtering\"\n</code></pre> <p>Follow Conventional Commits: - <code>feat:</code> for new features - <code>fix:</code> for bug fixes - <code>docs:</code> for documentation changes - <code>test:</code> for test changes - <code>refactor:</code> for code refactoring - <code>chore:</code> for maintenance tasks</p>"},{"location":"contributing/#7-push-and-create-pr","title":"7. Push and Create PR","text":"<pre><code>git push origin feature/your-feature-name\n</code></pre> <p>Then create a Pull Request on GitHub with: - Clear description of changes - Link to any related issues - Screenshots (if UI changes) - Test results</p>"},{"location":"contributing/#testing","title":"Testing","text":""},{"location":"contributing/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\ntask test\n\n# Run with coverage\ntask test-cov\n\n# Run specific test file\nuv run pytest tests/test_graphql_backend.py -v\n\n# Run specific test\nuv run pytest tests/test_graphql_backend.py::test_get_latest_release -v\n</code></pre>"},{"location":"contributing/#writing-tests","title":"Writing Tests","text":"<p>We use pytest for testing. Example test structure:</p> <pre><code>import pytest\nfrom unittest.mock import Mock, patch\n\ndef test_feature():\n    \"\"\"Test description.\"\"\"\n    # Arrange\n    input_data = \"test\"\n\n    # Act\n    result = function_under_test(input_data)\n\n    # Assert\n    assert result == expected_output\n\n@pytest.mark.asyncio\nasync def test_async_feature():\n    \"\"\"Test async function.\"\"\"\n    result = await async_function()\n    assert result is not None\n</code></pre>"},{"location":"contributing/#mocking-external-services","title":"Mocking External Services","text":"<p>Use <code>respx</code> for HTTP mocking and <code>unittest.mock</code> for other mocks:</p> <pre><code>import respx\nfrom httpx import Response\n\n@respx.mock\ndef test_api_call():\n    \"\"\"Test API call with mocked response.\"\"\"\n    respx.post(\"https://api.example.com\").mock(\n        return_value=Response(200, json={\"status\": \"ok\"})\n    )\n\n    result = make_api_call()\n    assert result[\"status\"] == \"ok\"\n</code></pre>"},{"location":"contributing/#adding-new-features","title":"Adding New Features","text":""},{"location":"contributing/#adding-a-new-scraper-backend","title":"Adding a New Scraper Backend","text":"<ol> <li>Create a new file in <code>scraper_backends/</code>:</li> </ol> <pre><code># scraper_backends/new_backend.py\nfrom scraper_interface import ScraperInterface\n\nclass NewBackend(ScraperInterface):\n    \"\"\"New scraper backend implementation.\"\"\"\n\n    def get_latest_release(self) -&gt; dict:\n        \"\"\"Fetch the latest release.\"\"\"\n        # Implementation\n        pass\n</code></pre> <ol> <li>Register in <code>scraper_interface.py</code>:</li> </ol> <pre><code>def create_scraper(backend: str = \"graphql\") -&gt; ScraperInterface:\n    \"\"\"Factory function to create scraper instances.\"\"\"\n    if backend == \"new\":\n        from scraper_backends.new_backend import NewBackend\n        return NewBackend()\n    # ... existing backends\n</code></pre> <ol> <li>Add tests:</li> </ol> <pre><code># tests/test_new_backend.py\nfrom scraper_backends.new_backend import NewBackend\n\ndef test_new_backend():\n    \"\"\"Test new backend.\"\"\"\n    backend = NewBackend()\n    release = backend.get_latest_release()\n    assert release is not None\n</code></pre>"},{"location":"contributing/#adding-new-configuration-options","title":"Adding New Configuration Options","text":"<ol> <li>Add to environment variables in <code>main.py</code></li> <li>Update documentation in <code>docs/configuration.md</code></li> <li>Update <code>docker-compose.yml</code> and <code>k8s/deployment.yaml</code></li> <li>Add tests for the new configuration</li> </ol>"},{"location":"contributing/#documentation","title":"Documentation","text":""},{"location":"contributing/#building-documentation-locally","title":"Building Documentation Locally","text":"<pre><code># Install mkdocs if not already installed\ntask dev-install\n\n# Serve documentation locally\nmkdocs serve\n</code></pre> <p>Then visit http://127.0.0.1:8000</p>"},{"location":"contributing/#documentation-style","title":"Documentation Style","text":"<ul> <li>Use clear, concise language</li> <li>Include code examples</li> <li>Add screenshots where helpful</li> <li>Use admonitions for warnings/notes:</li> </ul> <pre><code>!!! warning \"Important\"\n    This is a warning message.\n\n!!! note\n    This is a note.\n\n!!! tip\n    This is a helpful tip.\n</code></pre>"},{"location":"contributing/#release-process","title":"Release Process","text":"<p>Releases are automated using Release Please:</p> <ol> <li>Merge PRs to main</li> <li>Release Please creates a release PR</li> <li>Merge the release PR to trigger a release</li> <li>GitHub Actions builds and publishes the Docker image</li> </ol>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<ul> <li>Be respectful and inclusive</li> <li>Provide constructive feedback</li> <li>Help others learn and grow</li> <li>Follow the project's coding standards</li> </ul>"},{"location":"contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Questions: Open a discussion on GitHub</li> <li>Bugs: Open an issue with reproduction steps</li> <li>Features: Open an issue to discuss before implementing</li> <li>Security: Email maintainers directly (see README)</li> </ul>"},{"location":"contributing/#recognition","title":"Recognition","text":"<p>Contributors will be recognized in: - CHANGELOG.md - GitHub contributors page - Release notes</p> <p>Thank you for contributing! \ud83c\udf89</p>"},{"location":"deployment/","title":"Deployment","text":"<p>This guide covers different deployment options for the UniFi Release Announcer.</p>"},{"location":"deployment/#docker-compose-deployment","title":"Docker Compose Deployment","text":"<p>The recommended way to run the application in production is using Docker Compose.</p>"},{"location":"deployment/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose installed</li> <li>Discord bot token and channel ID</li> </ul>"},{"location":"deployment/#steps","title":"Steps","text":"<ol> <li>Clone the repository:</li> </ol> <pre><code>git clone &lt;repository-url&gt;\ncd unifi-release-announcer\n</code></pre> <ol> <li>Create environment file:</li> </ol> <p>Create a <code>.env</code> file in the project root:</p> <pre><code>DISCORD_BOT_TOKEN=your_discord_bot_token\nDISCORD_CHANNEL_ID=your_discord_channel_id\nSCRAPER_BACKEND=graphql\nTAGS=unifi-protect,unifi-network\n</code></pre> <ol> <li>Build the image:</li> </ol> <p>Using Taskfile:    <pre><code>task build\n</code></pre></p> <p>Or directly with Docker Compose:    <pre><code>docker compose build announcer\n</code></pre></p> <ol> <li>Run the service:</li> </ol> <p>Using Taskfile:    <pre><code>task docker-run\n</code></pre></p> <p>Or directly with Docker Compose:    <pre><code>docker compose up announcer\n</code></pre></p> <p>To run in detached mode:    <pre><code>docker compose up -d announcer\n</code></pre></p> <ol> <li>View logs:</li> </ol> <pre><code>docker compose logs -f announcer\n</code></pre> <ol> <li>Stop the service:</li> </ol> <pre><code>docker compose down\n</code></pre>"},{"location":"deployment/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<p>For production deployments on Kubernetes clusters (including k3s).</p>"},{"location":"deployment/#prerequisites_1","title":"Prerequisites","text":"<ul> <li>A running Kubernetes cluster (e.g., k3s, minikube)</li> <li><code>kubectl</code> configured to connect to your cluster</li> <li>A Docker Hub account or another container registry to host your image</li> </ul>"},{"location":"deployment/#steps_1","title":"Steps","text":""},{"location":"deployment/#1-build-and-push-the-docker-image","title":"1. Build and Push the Docker Image","text":"<p>First, build the Docker image and push it to a container registry. Replace <code>your-docker-hub-username</code> with your actual username.</p> <pre><code># Build the image\ndocker build -t your-docker-hub-username/unifi-release-announcer:latest .\n\n# Push the image\ndocker push your-docker-hub-username/unifi-release-announcer:latest\n</code></pre>"},{"location":"deployment/#2-update-the-deployment-image","title":"2. Update the Deployment Image","text":"<p>Modify <code>k8s/deployment.yaml</code> to point to the image you just pushed:</p> <pre><code># k8s/deployment.yaml\n\n# ...\ncontainers:\n  - name: unifi-release-announcer\n    # Replace with your actual image path\n    image: your-docker-hub-username/unifi-release-announcer:latest\n# ...\n</code></pre>"},{"location":"deployment/#3-create-your-secrets","title":"3. Create Your Secrets","text":"<p>Update <code>k8s/secret.yaml</code> with your actual Discord bot token and channel ID. </p> <p>Security Notice</p> <p>Do not commit this file with your secrets to a public repository.</p> <pre><code># k8s/secret.yaml\n\napiVersion: v1\nkind: Secret\nmetadata:\n  name: unifi-release-announcer-secrets\nstringData:\n  DISCORD_BOT_TOKEN: \"YOUR_REAL_BOT_TOKEN\"\n  DISCORD_CHANNEL_ID: \"YOUR_REAL_CHANNEL_ID\"\n</code></pre>"},{"location":"deployment/#4-apply-the-manifests","title":"4. Apply the Manifests","text":"<p>Use <code>kustomize</code> and <code>kubectl</code> to apply the configuration to your cluster.</p> <pre><code>cd k8s\nkubectl apply -k .\n</code></pre>"},{"location":"deployment/#5-verify-the-deployment","title":"5. Verify the Deployment","text":"<p>Check the status of your deployment and view the logs to ensure everything is running correctly.</p> <pre><code># Check deployment status\nkubectl get deployments\n\n# Check pod status\nkubectl get pods\n\n# View logs from the pod (replace with your pod's name)\nkubectl logs -f &lt;your-pod-name&gt;\n</code></pre>"},{"location":"deployment/#6-update-the-deployment","title":"6. Update the Deployment","text":"<p>To update the deployment with a new image:</p> <pre><code># Pull the latest image\nkubectl rollout restart deployment/unifi-release-announcer\n\n# Check rollout status\nkubectl rollout status deployment/unifi-release-announcer\n</code></pre>"},{"location":"deployment/#development-deployment","title":"Development Deployment","text":"<p>For local development, you can use the dev container or run directly with Python.</p>"},{"location":"deployment/#using-dev-container","title":"Using Dev Container","text":"<pre><code>task dev\n</code></pre> <p>This starts a development container with all dependencies installed and volume mounts for live code editing.</p>"},{"location":"deployment/#running-locally","title":"Running Locally","text":"<pre><code># Install dependencies\ntask dev-install\n\n# Run the application\ntask run\n</code></pre>"},{"location":"deployment/#environment-variables","title":"Environment Variables","text":"<p>Make sure to configure the following environment variables for any deployment method:</p> Variable Description Required <code>DISCORD_BOT_TOKEN</code> Your Discord bot token Yes <code>DISCORD_CHANNEL_ID</code> Discord channel ID for announcements Yes <code>SCRAPER_BACKEND</code> Backend to use for scraping: <code>graphql</code> (default) or <code>rss</code> No <code>TAGS</code> Comma-separated list of UniFi product tags to monitor (e.g., \"unifi-protect,unifi-network\"). Defaults to \"unifi-protect\" if not set. No"},{"location":"deployment/#persistent-storage","title":"Persistent Storage","text":"<p>The application stores state in <code>/cache/release_state.json</code> to track which releases have been announced. Make sure this directory is persisted across container restarts:</p>"},{"location":"deployment/#docker-compose","title":"Docker Compose","text":"<p>The <code>docker-compose.yml</code> already includes a volume mount:</p> <pre><code>volumes:\n  - ./cache:/cache\n</code></pre>"},{"location":"deployment/#kubernetes","title":"Kubernetes","text":"<p>The Kubernetes deployment uses an <code>emptyDir</code> volume by default. For production, consider using a PersistentVolumeClaim:</p> <pre><code>volumes:\n  - name: cache\n    persistentVolumeClaim:\n      claimName: unifi-release-announcer-cache\n</code></pre>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.13</li> <li>Discord Bot Token</li> <li>Discord Channel ID where announcements will be posted</li> </ul>"},{"location":"installation/#local-development","title":"Local Development","text":"<ol> <li>Clone the repository:</li> </ol> <pre><code>git clone &lt;repository-url&gt;\ncd unifi-release-announcer\n</code></pre> <ol> <li>Install dependencies using uv:</li> </ol> <pre><code>uv sync --extra dev\n</code></pre> <ol> <li>Configure environment variables:</li> </ol> <p>Create a <code>.env</code> file in the project root:</p> <pre><code>DISCORD_BOT_TOKEN=your_discord_bot_token\nDISCORD_CHANNEL_ID=your_discord_channel_id\nSCRAPER_BACKEND=graphql  # or 'rss' if you prefer\n</code></pre> <ol> <li>Run the application:</li> </ol> <pre><code>uv run main.py\n</code></pre>"},{"location":"installation/#docker-development","title":"Docker Development","text":"<ol> <li>Build the Docker image:</li> </ol> <pre><code>docker compose build\n</code></pre> <ol> <li>Run the container:</li> </ol> <pre><code>docker compose run announcer\n</code></pre>"},{"location":"installation/#dev-container-recommended-for-development","title":"Dev Container (Recommended for Development)","text":"<p>For the best development experience, use the provided dev container configuration:</p> <ol> <li>Prerequisites:</li> <li>VS Code with the Dev Containers extension</li> <li> <p>Docker Desktop</p> </li> <li> <p>Open in Dev Container:</p> </li> <li>Open the project in VS Code</li> <li>Press <code>Ctrl+Shift+P</code> (or <code>Cmd+Shift+P</code> on Mac)</li> <li>Select \"Dev Containers: Reopen in Container\"</li> <li> <p>Wait for the container to build and start</p> </li> <li> <p>Features included:</p> </li> <li>Pre-configured Python environment with all dependencies</li> <li>GraphQL API support</li> <li>Python extensions (Black, Ruff, MyPy, Pytest)</li> <li>Volume mounts for live code editing</li> <li>Automatic dependency installation</li> </ol>"},{"location":"quickstart/","title":"Quick Start Guide","text":"<p>Get the UniFi Release Announcer up and running in 5 minutes!</p>"},{"location":"quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose installed</li> <li>Discord bot token (Get one here)</li> <li>Discord channel ID</li> </ul>"},{"location":"quickstart/#quick-setup","title":"Quick Setup","text":""},{"location":"quickstart/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/damacus/unifi-release-announcer.git\ncd unifi-release-announcer\n</code></pre>"},{"location":"quickstart/#2-configure-environment","title":"2. Configure Environment","text":"<p>Create a <code>.env</code> file:</p> <pre><code>cat &gt; .env &lt;&lt; EOF\nDISCORD_BOT_TOKEN=your_bot_token_here\nDISCORD_CHANNEL_ID=your_channel_id_here\nSCRAPER_BACKEND=graphql\nTAGS=unifi-protect,unifi-network\nEOF\n</code></pre>"},{"location":"quickstart/#3-run-with-docker-compose","title":"3. Run with Docker Compose","text":"<pre><code>docker compose up -d announcer\n</code></pre>"},{"location":"quickstart/#4-verify-its-working","title":"4. Verify It's Working","text":"<pre><code># Check logs\ndocker compose logs -f announcer\n\n# You should see:\n# INFO - Logged in as YourBot#1234\n# INFO - Checking for new UniFi releases...\n</code></pre>"},{"location":"quickstart/#common-commands","title":"Common Commands","text":""},{"location":"quickstart/#using-taskfile","title":"Using Taskfile","text":"<pre><code># Show all available tasks\ntask\n\n# Install dependencies for local development\ntask dev-install\n\n# Run tests\ntask test\n\n# Run locally (without Docker)\ntask run\n\n# Build Docker image\ntask build\n\n# Run in Docker\ntask docker-run\n\n# Serve documentation\ntask docs-serve\n</code></pre>"},{"location":"quickstart/#using-docker-compose","title":"Using Docker Compose","text":"<pre><code># Start the bot\ndocker compose up -d announcer\n\n# View logs\ndocker compose logs -f announcer\n\n# Stop the bot\ndocker compose down\n\n# Rebuild and restart\ndocker compose up -d --build announcer\n</code></pre>"},{"location":"quickstart/#configuration-quick-reference","title":"Configuration Quick Reference","text":""},{"location":"quickstart/#environment-variables","title":"Environment Variables","text":"Variable Example Description <code>DISCORD_BOT_TOKEN</code> <code>MTIzNDU2Nzg5...</code> Your Discord bot token <code>DISCORD_CHANNEL_ID</code> <code>1234567890123456789</code> Channel ID for announcements <code>SCRAPER_BACKEND</code> <code>graphql</code> Backend: <code>graphql</code> or <code>rss</code> <code>TAGS</code> <code>unifi-protect,unifi-network</code> Comma-separated product tags"},{"location":"quickstart/#popular-tag-combinations","title":"Popular Tag Combinations","text":"<pre><code># UniFi Protect only (default)\nTAGS=unifi-protect\n\n# UniFi Protect and Network\nTAGS=unifi-protect,unifi-network\n\n# All major UniFi products\nTAGS=unifi-protect,unifi-network,unifi-access,unifi-talk\n\n# EdgeMax products\nTAGS=edgemax\n\n# All UniFi\nTAGS=unifi\n</code></pre>"},{"location":"quickstart/#troubleshooting-quick-fixes","title":"Troubleshooting Quick Fixes","text":""},{"location":"quickstart/#bot-not-posting-messages","title":"Bot not posting messages?","text":"<ol> <li>Check permissions: Bot needs \"Send Messages\" permission</li> <li>Verify channel ID: Right-click channel \u2192 Copy ID (enable Developer Mode first)</li> <li>Check logs: <code>docker compose logs announcer</code></li> </ol>"},{"location":"quickstart/#want-to-re-announce-the-latest-release","title":"Want to re-announce the latest release?","text":"<pre><code># Delete state file\ndocker compose exec announcer rm /cache/release_state.json\n\n# Or locally\nrm cache/release_state.json\n</code></pre>"},{"location":"quickstart/#bot-crashes-on-startup","title":"Bot crashes on startup?","text":"<ol> <li> <p>Verify environment variables:    <pre><code>docker compose config\n</code></pre></p> </li> <li> <p>Check token format: Should be a long string, no quotes needed in <code>.env</code></p> </li> <li> <p>Validate channel ID: Should be a number, 17-19 digits</p> </li> </ol>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>\ud83d\udcd6 Read the full documentation</li> <li>\ud83d\ude80 Deploy to Kubernetes</li> <li>\u2699\ufe0f Advanced configuration</li> <li>\ud83d\udc1b Troubleshooting guide</li> <li>\ud83e\udd1d Contributing guide</li> </ul>"},{"location":"quickstart/#getting-help","title":"Getting Help","text":"<ul> <li>Documentation: https://damacus.github.io/unifi-release-announcer/</li> <li>Issues: https://github.com/damacus/unifi-release-announcer/issues</li> <li>Discussions: https://github.com/damacus/unifi-release-announcer/discussions</li> </ul>"},{"location":"quickstart/#quick-development-setup","title":"Quick Development Setup","text":"<p>For contributors:</p> <pre><code># Clone and enter directory\ngit clone https://github.com/damacus/unifi-release-announcer.git\ncd unifi-release-announcer\n\n# Install dependencies\ntask dev-install\n\n# Run tests\ntask test\n\n# Run all checks\ntask check\n\n# Run locally\ntask run\n</code></pre> <p>That's it! Your bot should now be monitoring UniFi releases and posting to Discord. \ud83c\udf89</p>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>This guide helps you diagnose and fix common issues with the UniFi Release Announcer.</p>"},{"location":"troubleshooting/#common-issues","title":"Common Issues","text":""},{"location":"troubleshooting/#bot-not-posting-to-discord","title":"Bot Not Posting to Discord","text":""},{"location":"troubleshooting/#symptoms","title":"Symptoms","text":"<ul> <li>The bot runs without errors but doesn't post messages to Discord</li> <li>No error messages in the logs</li> </ul>"},{"location":"troubleshooting/#possible-causes-solutions","title":"Possible Causes &amp; Solutions","text":"<ol> <li>Missing Permissions</li> </ol> <p>The bot needs the \"Send Messages\" permission in the target channel.</p> <p>Solution:    - Go to your Discord server settings    - Navigate to Roles    - Find your bot's role    - Ensure \"Send Messages\" permission is enabled    - Check channel-specific permissions as well</p> <ol> <li>Incorrect Channel ID</li> </ol> <p>The channel ID might be wrong or the bot doesn't have access to that channel.</p> <p>Solution:    - Enable Developer Mode in Discord (User Settings \u2192 Advanced \u2192 Developer Mode)    - Right-click on the channel and select \"Copy ID\"    - Verify the ID matches your <code>DISCORD_CHANNEL_ID</code> environment variable    - Ensure the bot has been invited to the server and can see the channel</p> <ol> <li>No New Releases</li> </ol> <p>The bot only posts when it detects a new release.</p> <p>Solution:    - Check the cache file at <code>/cache/release_state.json</code>    - Delete this file to force the bot to post the latest release again    - Wait for the next check cycle (10 minutes by default)</p>"},{"location":"troubleshooting/#environment-variable-issues","title":"Environment Variable Issues","text":""},{"location":"troubleshooting/#symptoms_1","title":"Symptoms","text":"<ul> <li>Bot fails to start</li> <li>Error messages about missing configuration</li> </ul>"},{"location":"troubleshooting/#solutions","title":"Solutions","text":"<ol> <li>Check .env file exists</li> </ol> <pre><code>ls -la .env\n</code></pre> <ol> <li>Verify environment variables are set</li> </ol> <pre><code># For local development\ncat .env\n\n# For Docker\ndocker compose config\n\n# For Kubernetes\nkubectl get secret unifi-release-announcer-secrets -o yaml\n</code></pre> <ol> <li>Ensure proper format</li> </ol> <p>The <code>.env</code> file should look like:    <pre><code>DISCORD_BOT_TOKEN=your_token_here\nDISCORD_CHANNEL_ID=123456789012345678\nSCRAPER_BACKEND=graphql\nTAGS=unifi-protect,unifi-network\n</code></pre></p> <ul> <li>No spaces around <code>=</code></li> <li>No quotes needed for values</li> <li>Channel ID should be a number</li> </ul>"},{"location":"troubleshooting/#scraper-backend-issues","title":"Scraper Backend Issues","text":""},{"location":"troubleshooting/#graphql-backend-fails","title":"GraphQL Backend Fails","text":"<p>Symptoms: - Errors about GraphQL queries - Connection timeouts</p> <p>Solutions:</p> <ol> <li>Check network connectivity</li> </ol> <pre><code>curl -I https://community.ui.com\n</code></pre> <ol> <li>Try the RSS backend instead</li> </ol> <p>Update your <code>.env</code>:    <pre><code>SCRAPER_BACKEND=rss\n</code></pre></p> <ol> <li>Check for API changes</li> </ol> <p>The Ubiquiti Community API might have changed. Check the logs for specific error messages.</p>"},{"location":"troubleshooting/#rss-backend-fails","title":"RSS Backend Fails","text":"<p>Symptoms: - Errors parsing RSS feed - No releases detected</p> <p>Solutions:</p> <ol> <li>Verify RSS feed is accessible</li> </ol> <pre><code>curl https://community.ui.com/releases.rss\n</code></pre> <ol> <li>Switch to GraphQL backend</li> </ol> <p>Update your <code>.env</code>:    <pre><code>SCRAPER_BACKEND=graphql\n</code></pre></p>"},{"location":"troubleshooting/#docker-issues","title":"Docker Issues","text":""},{"location":"troubleshooting/#container-wont-start","title":"Container Won't Start","text":"<p>Symptoms: - Container exits immediately - Error messages in logs</p> <p>Solutions:</p> <ol> <li>Check logs</li> </ol> <pre><code>docker compose logs announcer\n</code></pre> <ol> <li>Verify image built correctly</li> </ol> <pre><code>task build\n# or\ndocker compose build announcer\n</code></pre> <ol> <li>Check environment variables</li> </ol> <pre><code>docker compose config\n</code></pre> <ol> <li>Ensure cache directory exists</li> </ol> <pre><code>mkdir -p cache\nchmod 755 cache\n</code></pre>"},{"location":"troubleshooting/#permission-issues-with-cache","title":"Permission Issues with Cache","text":"<p>Symptoms: - Errors writing to <code>/cache/release_state.json</code> - Permission denied errors</p> <p>Solutions:</p> <ol> <li>Fix cache directory permissions</li> </ol> <pre><code>chmod 755 cache\nchmod 644 cache/release_state.json  # if file exists\n</code></pre> <ol> <li>Check volume mount</li> </ol> <p>Verify in <code>docker-compose.yml</code>:    <pre><code>volumes:\n  - ./cache:/cache\n</code></pre></p>"},{"location":"troubleshooting/#kubernetes-issues","title":"Kubernetes Issues","text":""},{"location":"troubleshooting/#pod-wont-start","title":"Pod Won't Start","text":"<p>Symptoms: - Pod in CrashLoopBackOff state - Pod shows errors in describe</p> <p>Solutions:</p> <ol> <li>Check pod status</li> </ol> <pre><code>kubectl get pods\nkubectl describe pod &lt;pod-name&gt;\n</code></pre> <ol> <li>View logs</li> </ol> <pre><code>kubectl logs &lt;pod-name&gt;\n</code></pre> <ol> <li>Verify secrets are created</li> </ol> <pre><code>kubectl get secrets\nkubectl describe secret unifi-release-announcer-secrets\n</code></pre> <ol> <li>Check image pull</li> </ol> <pre><code>kubectl describe pod &lt;pod-name&gt; | grep -A 5 Events\n</code></pre>"},{"location":"troubleshooting/#secret-not-found","title":"Secret Not Found","text":"<p>Symptoms: - Error about missing secrets - Environment variables not set</p> <p>Solutions:</p> <ol> <li>Create the secret</li> </ol> <pre><code>cd k8s\nkubectl apply -f secret.yaml\n</code></pre> <ol> <li>Verify secret exists</li> </ol> <pre><code>kubectl get secret unifi-release-announcer-secrets\n</code></pre>"},{"location":"troubleshooting/#tag-filtering-issues","title":"Tag Filtering Issues","text":""},{"location":"troubleshooting/#wrong-releases-being-announced","title":"Wrong Releases Being Announced","text":"<p>Symptoms: - Releases that don't match your configured tags are being announced - Getting announcements for products you didn't configure</p> <p>Solutions:</p> <ol> <li>Verify TAGS environment variable</li> </ol> <p>Check your configuration:    <pre><code># For Docker\ndocker compose config | grep TAGS\n\n# For Kubernetes\nkubectl get deployment unifi-release-announcer -o yaml | grep -A 5 TAGS\n</code></pre></p> <ol> <li>Check tag matching logic</li> </ol> <p>The bot matches releases based on tags in the release metadata. Some releases may have multiple tags.</p> <ol> <li>Review available tags</li> </ol> <p>See the Configuration page for a complete list of available tags.</p> <ol> <li>Debug tag matching</li> </ol> <p>You can use the debug script to see what tags are being matched:    <pre><code>uv run python debug_tags.py\n</code></pre></p>"},{"location":"troubleshooting/#debugging-tips","title":"Debugging Tips","text":""},{"location":"troubleshooting/#enable-verbose-logging","title":"Enable Verbose Logging","text":"<p>Add logging configuration to see more details:</p> <pre><code># In main.py, add at the top\nimport logging\nlogging.basicConfig(level=logging.DEBUG)\n</code></pre>"},{"location":"troubleshooting/#check-release-state","title":"Check Release State","text":"<p>The bot stores the last announced release in <code>/cache/release_state.json</code>:</p> <pre><code># View current state\ncat cache/release_state.json\n\n# Reset state (will re-announce latest release)\nrm cache/release_state.json\n</code></pre>"},{"location":"troubleshooting/#test-scraper-backends","title":"Test Scraper Backends","text":"<p>You can test each backend independently:</p> <pre><code># Test GraphQL backend\nuv run python -c \"from scraper_backends.graphql_backend import GraphQLBackend; backend = GraphQLBackend(); print(backend.get_latest_release())\"\n\n# Test RSS backend\nuv run python -c \"from scraper_backends.rss_backend import RSSBackend; backend = RSSBackend(); print(backend.get_latest_release())\"\n</code></pre>"},{"location":"troubleshooting/#verify-discord-bot-token","title":"Verify Discord Bot Token","text":"<p>Test if your bot token is valid:</p> <pre><code># Using curl\ncurl -H \"Authorization: Bot YOUR_BOT_TOKEN\" https://discord.com/api/v10/users/@me\n</code></pre>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you're still experiencing issues:</p> <ol> <li>Check the logs - Most issues will show error messages in the logs</li> <li>Review the configuration - Double-check all environment variables</li> <li>Search existing issues - Someone may have encountered the same problem</li> <li>Open an issue - Provide:</li> <li>Error messages from logs</li> <li>Your configuration (without sensitive data)</li> <li>Steps to reproduce the issue</li> <li>Environment details (Docker version, Kubernetes version, etc.)</li> </ol>"},{"location":"troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"troubleshooting/#bot-using-too-much-memory","title":"Bot Using Too Much Memory","text":"<p>Solutions:</p> <ol> <li>Check for memory leaks</li> </ol> <p>Monitor memory usage:    <pre><code># Docker\ndocker stats\n\n# Kubernetes\nkubectl top pods\n</code></pre></p> <ol> <li>Reduce check frequency</li> </ol> <p>The bot checks every 10 minutes by default. This is configured in <code>main.py</code>.</p>"},{"location":"troubleshooting/#slow-response-times","title":"Slow Response Times","text":"<p>Solutions:</p> <ol> <li>Use GraphQL backend</li> </ol> <p>GraphQL is generally faster than RSS:    <pre><code>SCRAPER_BACKEND=graphql\n</code></pre></p> <ol> <li>Check network latency</li> </ol> <pre><code>ping community.ui.com\n</code></pre>"}]}